{% extends "dashboard/dashboard.html" %}
{% block content %}
<main id="posts-admin" class="col-md-9 ml-sm-auto col-lg-10 px-md-4 py-4">
  <h1 class="h2">Posts Overview</h1>
  <div id="log" style="display:none;" class="alert alert-warning alert-dismissible fade show" role="alert">
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  {% with messages = get_flashed_messages() %}
  {% if messages %}
  <div class="alert alert-warning alert-dismissible fade show" role="alert">
    {{ messages[0] }}.
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  {% endif %}
  {% endwith %}
  <div class="row add-space">
    <div class="col">
      <a role="button" id="new-blogpost" class="btn btn-sm btn-outline-primary" href="{{url_for('posts.add_post')}}">
        <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
          class="feather feather-plus">
          <line x1="12" y1="5" x2="12" y2="19"></line>
          <line x1="5" y1="12" x2="19" y2="12"></line>
        </svg>
        <strong>New Post</strong></a>
    </div>
  </div>&nbsp;&nbsp;&nbsp;&nbsp;
  <div class="row">
    <div class="col">
      <table id="posts-dtable" class="table table-bordered" style="width:100%">
        <thead>
          <tr>
            <th>Title</th>
            <th>Posted On</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for post in posts %}
          <tr>
            <td id="post_id">{{post.title}}</td>
            <td id="post_date">{{post.posted_date}}</td>
            <td>
              <a role="button" href="{{ url_for('posts.edit_post', post_title=post.title) }}" id="edit-blogpost"
                class="btn btn-sm btn-outline-primary">
                <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none"
                  stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                  class="feather feather-edit">
                  <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                  <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                </svg>
                Edit</a>
              <button class="delete-blogpost btn btn-sm btn-outline-danger">
                <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none"
                  stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                  class="feather feather-trash-2">
                  <polyline points="3 6 5 6 21 6"></polyline>
                  <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                  <line x1="10" y1="11" x2="10" y2="17"></line>
                  <line x1="14" y1="11" x2="14" y2="17"></line>
                </svg>
                Delete</button>
            </td>
          </tr>
          {% endfor %}
      </table>
    </div>
  </div>
</main>
{% endblock %}